/* Meet & Eat POS - Production Stylesheet */

:root {
  color-scheme: light;
  --bg: #f0f2f5;
  --panel: #ffffff;
  --text: #1a1a2e;
  --text-secondary: #64748b;
  --accent: #e67e22;
  --accent-hover: #d35400;
  --success: #10b981;
  --success-hover: #059669;
  --danger: #ef4444;
  --danger-hover: #dc2626;
  --info: #3b82f6;
  --border: #e2e8f0;
  --input-bg: #f8fafc;
  --input-focus: #e67e22;
  --hover: #f1f5f9;
  --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
  --shadow: 0 1px 3px rgba(0,0,0,0.08), 0 1px 2px rgba(0,0,0,0.04);
  --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.08), 0 2px 4px -2px rgba(0,0,0,0.04);
  --radius: 10px;
  --radius-sm: 6px;
  --list-active-bg: #fff7ed;
  --font: "Inter","Segoe UI",system-ui,-apple-system,sans-serif;
  font-family: var(--font);
  font-size: 15px;
  line-height: 1.5;
}

*,*::before,*::after { box-sizing: border-box; margin: 0; }

body { background: var(--bg); color: var(--text); -webkit-font-smoothing: antialiased; }

/* App Shell */
.app { display: grid; grid-template-columns: 240px minmax(0,1fr); min-height: 100vh; }
.backdrop { display: none; }
.topbar { display: none; }
.mobile-only { display: none; }

/* Sidebar */
.sidebar {
  background: var(--panel); border-right: 1px solid var(--border);
  padding: 20px 14px; display: flex; flex-direction: column; gap: 4px;
  position: sticky; top: 0; height: 100vh; overflow-y: auto;
}
.brand { display: flex; align-items: center; gap: 8px; font-size: 22px; font-weight: 800; padding: 8px 12px 20px; color: var(--accent); letter-spacing: -0.3px; }
.brand-logo { width: 28px; height: 28px; object-fit: cover; border-radius: 6px; }
.nav-button {
  border: none; background: transparent; color: var(--text); padding: 11px 14px;
  border-radius: var(--radius-sm); font-size: 15px; font-weight: 500; text-align: left;
  cursor: pointer; transition: background 120ms, color 120ms; display: flex; align-items: center; gap: 10px;
}
.nav-button:hover { background: var(--hover); }
.nav-button.active { background: #fff7ed; color: var(--accent); font-weight: 600; }
.sidebar-footer { margin-top: auto; padding-top: 12px; border-top: 1px solid var(--border); font-size: 12px; color: var(--text-secondary); text-align: center; }

/* Main */
.main { padding: 24px 28px; min-width: 0; overflow-y: auto; }
.page-title { font-size: 24px; font-weight: 700; margin-bottom: 16px; letter-spacing: -0.3px; }

/* Card */
.card { background: var(--panel); border: 1px solid var(--border); border-radius: var(--radius); padding: 16px; margin-bottom: 16px; box-shadow: var(--shadow-sm); }
.card-header { font-weight: 600; font-size: 16px; margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid var(--border); }

/* Row */
.row { display: flex; align-items: center; gap: 8px; }

/* Form Controls */
.input,.select {
  height: 40px; border-radius: var(--radius-sm); border: 1px solid var(--border);
  background: var(--input-bg); color: var(--text); padding: 0 12px; font-size: 14px;
  font-family: inherit; transition: border-color 150ms, box-shadow 150ms; outline: none;
}
.input:focus,.select:focus { border-color: var(--input-focus); box-shadow: 0 0 0 3px rgba(230,126,34,0.12); }
.select { appearance: auto; cursor: pointer; }

/* Buttons */
.button {
  height: 38px; border-radius: var(--radius-sm); border: 1px solid var(--border);
  background: var(--panel); color: var(--text); padding: 0 16px; font-size: 14px;
  font-weight: 500; font-family: inherit; cursor: pointer;
  transition: background 120ms, border-color 120ms, box-shadow 120ms;
  white-space: nowrap; display: inline-flex; align-items: center; justify-content: center; gap: 6px;
}
.button:hover { background: var(--hover); border-color: #cbd5e1; }
.button:active { transform: translateY(1px); }
.button:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
.button.primary { background: var(--accent); color: #fff; border-color: var(--accent); font-weight: 600; }
.button.primary:hover { background: var(--accent-hover); border-color: var(--accent-hover); }
.button.success { background: var(--success); color: #fff; border-color: var(--success); font-weight: 600; }
.button.success:hover { background: var(--success-hover); border-color: var(--success-hover); }
.button.danger { background: var(--danger); color: #fff; border-color: var(--danger); font-weight: 600; }
.button.danger:hover { background: var(--danger-hover); border-color: var(--danger-hover); }
.button.ghost { background: transparent; border-color: transparent; color: var(--text-secondary); }
.button.ghost:hover { background: var(--hover); color: var(--text); }
.button-sm { height: 32px; padding: 0 10px; font-size: 13px; }

/* Tables */
.table { width: 100%; border-collapse: collapse; font-size: 14px; }
.table th {
  padding: 10px 12px; border-bottom: 2px solid var(--border); text-align: left;
  font-weight: 600; font-size: 13px; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.04em;
}
.table td { padding: 10px 12px; border-bottom: 1px solid var(--border); vertical-align: middle; }
.table tbody tr:hover { background: var(--hover); }
.table tbody tr:last-child td { border-bottom: none; }

/* Utility */
.muted { color: var(--text-secondary); }
.text-right { text-align: right; }
.text-center { text-align: center; }
.badge {
  display: inline-flex; align-items: center; justify-content: center;
  padding: 2px 8px; border-radius: 999px; background: #fff7ed; border: 1px solid #fed7aa;
  font-size: 12px; font-weight: 600; color: var(--accent); min-width: 28px;
}
.badge-success { background: #ecfdf5; border-color: #a7f3d0; color: var(--success); }
.badge-danger { background: #fef2f2; border-color: #fecaca; color: var(--danger); }
.status-dot { width: 8px; height: 8px; border-radius: 50%; display: inline-block; }
.status-dot.on { background: var(--success); }
.status-dot.off { background: var(--danger); }
.list { max-height: 340px; overflow-y: auto; }
.empty-state { padding: 32px 16px; text-align: center; color: var(--text-secondary); font-size: 14px; }
.toast { padding: 10px 16px; border-radius: var(--radius-sm); font-size: 14px; margin-top: 12px; }
.toast-success { background: #ecfdf5; color: #065f46; border: 1px solid #a7f3d0; }
.toast-error { background: #fef2f2; color: #991b1b; border: 1px solid #fecaca; }
.toast-info { background: #eff6ff; color: #1e40af; border: 1px solid #bfdbfe; }
.divider { height: 1px; background: var(--border); margin: 12px 0; }

/* Split / Grid */
.split { display: grid; grid-template-columns: 2fr 1fr; gap: 16px; }

/* Billing Page */
.billing-page { display: flex; flex-direction: column; min-height: calc(100vh - 48px); }
.billing-split { flex: 1; grid-template-columns: minmax(0,1fr) 380px; align-items: start; }
.billing-right { display: flex; flex-direction: column; gap: 0; position: sticky; top: 24px; }
.payment-mode-card { margin-bottom: 12px; }
.payment-mode-row { display: flex; align-items: center; justify-content: space-between; gap: 10px; }
.payment-mode-row .select { min-width: 170px; }
.split-payment-grid { margin-top: 12px; display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.split-payment-grid .input { width: 100%; margin-top: 4px; }
.split-tally {
  grid-column: span 2;
  display: flex;
  justify-content: space-between;
  gap: 12px;
  font-size: 13px;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  padding: 8px 10px;
}
.split-tally.ok { background: #ecfdf5; border-color: #a7f3d0; color: #065f46; }
.split-tally.warn { background: #fff7ed; border-color: #fed7aa; color: #9a3412; }
.billing-actions { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
.billing-actions .button { flex: 1; min-width: 120px; }
.bill-saved-banner { margin-top: 12px; padding: 10px 14px; border-radius: var(--radius-sm); background: #ecfdf5; border: 1px solid #a7f3d0; color: #065f46; font-weight: 500; text-align: center; }

/* Bill Summary */
.summary-row { display: flex; justify-content: space-between; align-items: center; padding: 8px 0; }
.summary-row + .summary-row { border-top: 1px solid var(--border); }
.summary-total { font-size: 20px; font-weight: 700; color: var(--accent); }

/* Qty Stepper */
.qty-stepper { display: inline-flex; align-items: center; border: 1px solid var(--border); border-radius: var(--radius-sm); overflow: hidden; }
.qty-stepper button {
  width: 32px; height: 32px; border: none; background: var(--input-bg); color: var(--text);
  font-size: 16px; font-weight: 600; cursor: pointer; display: grid; place-items: center; transition: background 100ms;
}
.qty-stepper button:hover { background: var(--hover); }
.qty-stepper .qty-value {
  min-width: 36px; text-align: center; font-size: 14px; font-weight: 600; padding: 0 4px;
  border-left: 1px solid var(--border); border-right: 1px solid var(--border); height: 32px; line-height: 32px;
}

/* Product Search */
.search-dropdown { margin-top: 6px; border: 1px solid var(--border); border-radius: var(--radius-sm); overflow: hidden; }
.search-item { padding: 8px 12px; cursor: pointer; display: flex; align-items: center; justify-content: space-between; transition: background 80ms; }
.search-item:hover,.search-item.active { background: var(--list-active-bg); }
.search-item + .search-item { border-top: 1px solid var(--border); }

/* History Page */
.history-filters { display: flex; gap: 8px; flex-wrap: wrap; align-items: center; }
.history-filters .input { min-width: 160px; }
.history-filters .input[type="date"] { min-width: 150px; }
.history-table { table-layout: fixed; }
.history-table th,.history-table td { overflow: hidden; text-overflow: ellipsis; vertical-align: middle; }
.history-table th { font-weight: 600; }
/* distribute columns evenly for Bill History rows */
.history-table .col-billno { width: 20%; }
.history-table .col-money { width: 13%; }
.history-table .col-payment { width: 12%; }
/* explicitly size Total and Date for balanced spacing */
.history-table col:nth-child(4) { width: 13%; }
.history-table .col-date { width: 20%; }
.history-table .col-actions { width: 16%; }
/* Ensure headers and cells for money columns align to the right */
.history-table th:nth-child(2),
.history-table th:nth-child(3),
.history-table th:nth-child(4),
.history-table td:nth-child(2),
.history-table td:nth-child(3),
.history-table td:nth-child(4),
.history-table td:nth-child(7) { text-align: right; }
/* add a small gap between Total and Date while keeping Date right-aligned */
.history-table th:nth-child(6),
.history-table td:nth-child(6) { text-align: right; padding-left: 12px; }
/* Bill number column should be left and vertically centered */
.history-table th:nth-child(1),
.history-table td:nth-child(1) { text-align: left; }
/* Action cell (last column) should not show ellipsis or clip the button */
.history-table td:last-child { overflow: visible; text-overflow: clip; white-space: nowrap; }
.history-table td:last-child::after { content: none !important; }
.history-table td:last-child .button { white-space: nowrap; }
.history-row-actions { display: inline-flex; justify-content: flex-end; align-items: center; gap: 6px; }
.history-delete-button { min-width: 32px; padding: 0 8px; }

/* Analytics Page */
.analytics-grid { display: grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 12px; }
.analytics-card { display: flex; flex-direction: column; gap: 6px; }
.analytics-amount { font-size: 22px; font-weight: 700; color: var(--accent); }
.analytics-total { grid-column: span 3; }


/* Bill Detail */
.bill-detail { border: 2px solid var(--accent); }
.bill-detail .card-header { display: flex; justify-content: space-between; align-items: center; }

/* Bill detail table: fixed layout + explicit column widths to keep headers and rows aligned */
.bill-detail .bill-detail-table { table-layout: fixed; }
.bill-detail-table .col-item { width: 45%; text-align: left; }
.bill-detail-table .col-qty { width: 15%; text-align: center; padding-left: 0.5rem; padding-right: 0.5rem; }
.bill-detail-table td.col-qty, .bill-detail-table thead th.col-qty { text-align: start !important; vertical-align: middle; }
.bill-detail-table .col-price { width: 20%; text-align: right; }
.bill-detail-table .col-total { width: 20%; text-align: right; }
/* ensure header labels align with numeric cells */
.bill-detail-table thead th.text-right { text-align: right; }

/* Current Order (Bill) table — make headers and cells align exactly */
.bill-table { table-layout: fixed; }
.bill-table .col-item { width: 40%; }
.bill-table .col-price { width: 15%; }
.bill-table .col-qty { width: 20%; }
.bill-table .col-total { width: 15%; }
.bill-table .col-actions { width: 10%; }
.bill-table thead th { font-weight: 600; }
.bill-table td, .bill-table th { vertical-align: middle; }
/* enforce identical alignment for header and body per-column */
.bill-table th:nth-child(1), .bill-table td:nth-child(1) { text-align: left; }
.bill-table th:nth-child(2), .bill-table td:nth-child(2) { text-align: right; }
.bill-table th:nth-child(3), .bill-table td:nth-child(3) { text-align: center; }
.bill-table th:nth-child(4), .bill-table td:nth-child(4) { text-align: right; }
.bill-table th:nth-child(5), .bill-table td:nth-child(5) { text-align: center; }
/* center the qty stepper within its cell exactly */
.bill-table td.col-qty { display: flex; justify-content: center; align-items: center; }
.bill-table td .qty-stepper { margin: 0; }
.bill-table td .button-danger { min-width: 36px; }


.bill-detail-summary { display: flex; gap: 18px; justify-content: flex-start; align-items: baseline; margin-top: 18px; }
.bill-detail-summary > div { display: flex; gap: 8px; align-items: baseline; min-width: 120px; }
.bill-detail-summary strong { display: inline-block; min-width: 84px; text-align: right; }
.bill-detail-summary { display: flex; gap: 24px; padding: 12px 0 0; border-top: 1px solid var(--border); margin-top: 8px; }
.bill-detail-summary div { font-size: 13px; color: var(--text-secondary); }
.bill-detail-summary strong { font-size: 16px; color: var(--text); display: block; }

/* Menu Items Page */
.add-item-form { display: grid; grid-template-columns: 2fr 1fr 1fr auto; gap: 8px; align-items: center; }
.menu-table { table-layout: fixed; }
.menu-table .col-no { width: 8%; text-align: center; }
.menu-table .col-name { width: 28%; }
.menu-table .col-category { width: 16%; }
.menu-table .col-price { width: 14%; text-align: right; }
.menu-table .col-status { width: 14%; text-align: center; }
.menu-table .col-actions { width: 20%; text-align: center; }
/* enforce header/body alignment by column index as a safeguard */
.menu-table th:nth-child(4), .menu-table td:nth-child(4) { text-align: right; }
.menu-table th:nth-child(5), .menu-table td:nth-child(5) { text-align: center; }
.menu-table th:nth-child(6), .menu-table td:nth-child(6) { text-align: center; }
/* vertically center status and action button groups */
.menu-table td .status-dot { vertical-align: middle; margin-right: 8px; }
.menu-table td .button { vertical-align: middle; }
.menu-table td .row { justify-content: center; gap: 8px; }


/* Backup Page */
.backup-grid { display: grid; grid-template-columns: 1.35fr 1fr; gap: 12px; }
.backup-settings { display: grid; grid-template-columns: 1fr 120px auto; gap: 8px; align-items: center; }
.backup-actions { display: flex; gap: 8px; flex-wrap: wrap; align-items: center; padding-top: 12px; border-top: 1px solid var(--border); margin-top: 12px; }
.backup-hint { margin-top: 10px; font-size: 13px; color: var(--text-secondary); }
.backup-meta { margin-top: 10px; padding-top: 10px; border-top: 1px solid var(--border); display: grid; grid-template-columns: 1fr 120px; gap: 10px; }
.backup-meta div { display: flex; flex-direction: column; gap: 4px; }
.backup-meta strong { font-size: 14px; color: var(--text); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.backup-selected {
  margin: 0 0 12px;
  padding: 10px 12px;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--input-bg);
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
}
.backup-files-table { font-size: 13px; }
.backup-files-table td { padding: 8px 10px; }
.backup-files-table tbody tr.selected { background: var(--list-active-bg); }
.backup-restore-row { align-items: center; gap: 10px; }

/* Pagination */
.pagination { display: flex; justify-content: flex-end; align-items: center; gap: 4px; padding-top: 12px; }
.pagination .page-info { padding: 0 12px; font-size: 13px; color: var(--text-secondary); }

/* Responsive */
@media (max-width: 900px) {
  .mobile-only { display: block; }
  .app { grid-template-columns: 1fr; }
  .topbar {
    position: sticky; top: 0; z-index: 20; display: flex; align-items: center;
    justify-content: space-between; padding: 10px 14px; background: var(--panel);
    border-bottom: 1px solid var(--border); box-shadow: var(--shadow);
  }
  .topbar .brand { margin: 0; padding: 0; font-size: 18px; }
  .icon-button {
    height: 40px; width: 40px; border-radius: var(--radius-sm); border: 1px solid var(--border);
    background: var(--input-bg); cursor: pointer; display: grid; place-items: center; font-size: 18px;
  }
  .icon-button:hover { background: var(--hover); }
  .main { padding: 16px; }
  .split,.billing-split { grid-template-columns: 1fr; }
  .billing-right { position: static; }
  .add-item-form { grid-template-columns: 1fr; }
  .payment-mode-row { flex-direction: column; align-items: stretch; }
  .payment-mode-row .select { min-width: 0; width: 100%; }
  .split-payment-grid { grid-template-columns: 1fr; }
  .split-tally { grid-column: span 1; flex-direction: column; }
  .analytics-grid { grid-template-columns: 1fr; }
  .analytics-total { grid-column: span 1; }
  .backup-grid { grid-template-columns: 1fr; }
  .backup-settings { grid-template-columns: 1fr; }
  .backup-meta { grid-template-columns: 1fr; }
  .history-filters { flex-direction: column; align-items: stretch; }
  .history-filters .input,.history-filters .button { width: 100%; }
  .sidebar {
    position: fixed; top: 0; left: 0; bottom: 0; width: min(84vw,300px); z-index: 30;
    transform: translateX(-110%); transition: transform 200ms ease; box-shadow: 8px 0 24px rgba(0,0,0,0.15);
  }
  .sidebar.open { transform: translateX(0); }
  .backdrop { display: block; position: fixed; inset: 0; background: rgba(0,0,0,0.3); z-index: 25; }
  .table { display: block; overflow-x: auto; -webkit-overflow-scrolling: touch; }
  .table th,.table td { white-space: nowrap; }
}

/* Print */
@media print {
  body { background: #fff; color: #000; font-size: 12px; }
  .sidebar,.topbar,.backdrop,.no-print { display: none !important; }
  .app { grid-template-columns: 1fr; }
  .main { padding: 0; }
  .card { box-shadow: none; border: 1px solid #ddd; break-inside: avoid; }
}
